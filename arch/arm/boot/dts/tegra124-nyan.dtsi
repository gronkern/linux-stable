// SPDX-License-Identifier: GPL-2.0
#include <dt-bindings/input/input.h>
#include "tegra124.dtsi"

/ {
	aliases {
		rtc0 = "/i2c@7000d000/pmic@40";
		rtc1 = "/rtc@7000e000";
		serial0 = &uarta;
	};

	chosen {
		stdout-path = "serial0:115200n8";
	};

	/*
	 * Note that recent version of the device tree compiler (starting with
	 * version 1.4.2) warn about this node containing a reg property, but
	 * missing a unit-address. However, the bootloader on these Chromebook
	 * devices relies on the full name of this node to be exactly /memory.
	 * Adding the unit-address causes the bootloader to create a /memory
	 * node and write the memory bank configuration to that node, which in
	 * turn leads the kernel to believe that the device has 2 GiB of
	 * memory instead of the amount detected by the bootloader.
	 *
	 * The name of this node is effectively ABI and must not be changed.
	 */
	memory {
		device_type = "memory";
		reg = <0x0 0x80000000 0x0 0x80000000>;
	};

	/delete-node/ memory@80000000;

	host1x@50000000 {
		hdmi@54280000 {
			status = "okay";
			vdd-supply = <&vdd_3v3_run>;
			pll-supply = <&vdd_hdmi_pll>;
			hdmi-supply = <&vdd_5v0_avd_lcd>;

			nvidia,ddc-i2c-bus = <&hdmi_ddc>;
			nvidia,hpd-gpio =
				<&gpio TEGRA_GPIO(N, 7) GPIO_ACTIVE_HIGH>;
		};

		sor@54540000 {
			status = "okay";
			nvidia,dpaux = <&dpaux>;
			nvidia,panel = <&panel>;
		};

		dpaux@545c0000 {
			vdd-supply = <&vdd_3v3_dpaux>;
			status = "okay";
		};
	};

	gpu@0,57000000 {
		status = "okay";

		vdd-supply = <&vdd_gpu>;
	};

	serial@70006000 {
		/* Debug connector on the bottom of the board near SD card. */
		status = "okay";
	};

	pwm@7000a000 {
		status = "okay";
	};

	i2c@7000c000 {
		status = "okay";
		clock-frequency = <100000>;

		acodec: audio-codec@10 {
			compatible = "maxim,max98090";
			reg = <0x10>;
			interrupt-parent = <&gpio>;
			interrupts = <TEGRA_GPIO(H, 4) IRQ_TYPE_EDGE_FALLING>;
		};

		temperature-sensor@4c {
			compatible = "ti,tmp451";
			reg = <0x4c>;
			interrupt-parent = <&gpio>;
			interrupts = <TEGRA_GPIO(I, 6) IRQ_TYPE_LEVEL_LOW>;
			vcc-supply = <&vdd_3v3_sensor>;
			#thermal-sensor-cells = <1>;
		};
	};

	i2c@7000c400 {
		status = "okay";
		clock-frequency = <100000>;

		trackpad@15 {
			compatible = "elan,ekth3000";
			reg = <0x15>;
			interrupt-parent = <&gpio>;
			interrupts = <TEGRA_GPIO(W, 3) IRQ_TYPE_EDGE_FALLING>;
			wakeup-source;
		};
	};

	i2c@7000c500 {
		status = "okay";
		clock-frequency = <400000>;

		tpm@20 {
			compatible = "infineon,slb9645tt";
			reg = <0x20>;
		};
	};

	hdmi_ddc: i2c@7000c700 {
		status = "okay";
		clock-frequency = <100000>;
	};

	i2c@7000d000 {
		status = "okay";
		clock-frequency = <400000>;

		pmic: pmic@40 {
			compatible = "ams,as3722";
			reg = <0x40>;
			interrupts = <0 86 IRQ_TYPE_LEVEL_HIGH>;

			ams,system-power-controller;

			#interrupt-cells = <2>;
			interrupt-controller;

			gpio-controller;
			#gpio-cells = <2>;

			pinctrl-names = "default";
			pinctrl-0 = <&as3722_default>;

			as3722_default: pinmux {
				gpio0 {
					pins = "gpio0";
					function = "gpio";
					bias-pull-down;
				};

				gpio1 {
					pins = "gpio1";
					function = "gpio";
					bias-pull-up;
				};

				gpio2_4_7 {
					pins = "gpio2", "gpio4", "gpio7";
					function = "gpio";
					bias-pull-up;
				};

				gpio3_6 {
					pins = "gpio3", "gpio6";
					bias-high-impedance;
				};

				gpio5 {
					pins = "gpio5";
					function = "clk32k-out";
					bias-pull-down;
				};
			};

			regulators {
				vsup-sd2-supply = <&vdd_5v0_sys>;
				vsup-sd3-supply = <&vdd_5v0_sys>;
				vsup-sd4-supply = <&vdd_5v0_sys>;
				vsup-sd5-supply = <&vdd_5v0_sys>;
				vin-ldo0-supply = <&vdd_1v35_lp0>;
				vin-ldo1-6-supply = <&vdd_3v3_run>;
				vin-ldo2-5-7-supply = <&vddio_1v8>;
				vin-ldo3-4-supply = <&vdd_3v3_run>;
				vin-ldo9-10-supply = <&vdd_5v0_sys>;
				vin-ldo11-supply = <&vdd_3v3_run>;

				vdd_cpu: sd0 {
					regulator-name = "+13.5V_VDD_CPU_AP";
					regulator-min-microvolt = <700000>;
					regulator-max-microvolt = <1350000>;
					regulator-min-microamp = <3500000>;
					regulator-max-microamp = <3500000>;
					regulator-always-on;
					regulator-boot-on;
					ams,ext-control = <2>;
				};

				sd1 {
					regulator-name = "+13.5V_VDD_CORE";
					regulator-min-microvolt = <700000>;
					regulator-max-microvolt = <1350000>;
					regulator-min-microamp = <2500000>;
					regulator-max-microamp = <4000000>;
					regulator-always-on;
					regulator-boot-on;
					ams,ext-control = <1>;
				};

				vdd_1v35_lp0: sd2 {
					regulator-name = "+1.35V_LP0(sd2)";
					regulator-min-microvolt = <1350000>;
					regulator-max-microvolt = <1350000>;
					regulator-always-on;
					regulator-boot-on;
				};

				sd3 {
					regulator-name = "+1.35V_LP0(sd3)";
					regulator-min-microvolt = <1350000>;
					regulator-max-microvolt = <1350000>;
					regulator-always-on;
					regulator-boot-on;
				};

				vdd_1v05_run: sd4 {
					regulator-name = "+1.05V_RUN";
					regulator-min-microvolt = <1050000>;
					regulator-max-microvolt = <1050000>;
				};

				vddio_1v8: sd5 {
					regulator-name = "+1.8V_VDDIO";
					regulator-min-microvolt = <1800000>;
					regulator-max-microvolt = <1800000>;
					regulator-always-on;
				};

				vdd_gpu: sd6 {
					regulator-name = "+12V_VDD_GPU_AP";
					regulator-min-microvolt = <650000>;
					regulator-max-microvolt = <1200000>;
					regulator-min-microamp = <3500000>;
					regulator-max-microamp = <3500000>;
					regulator-boot-on;
					regulator-always-on;
				};

				avdd_1v05_run: ldo0 {
					regulator-name = "+1.05V_RUN_AVDD";
					regulator-min-microvolt = <1050000>;
					regulator-max-microvolt = <1050000>;
					regulator-boot-on;
					regulator-always-on;
					ams,ext-control = <1>;
				};

				ldo1 {
					regulator-name = "+1.8V_RUN_CAM";
					regulator-min-microvolt = <1800000>;
					regulator-max-microvolt = <1800000>;
				};

				ldo2 {
					regulator-name = "+1.2V_GEN_AVDD";
					regulator-min-microvolt = <1200000>;
					regulator-max-microvolt = <1200000>;
					regulator-boot-on;
					regulator-always-on;
				};

				ldo3 {
					regulator-name = "+1.00V_LP0_VDD_RTC";
					regulator-min-microvolt = <1000000>;
					regulator-max-microvolt = <1000000>;
					regulator-boot-on;
					regulator-always-on;
					ams,enable-tracking;
				};

				vdd_run_cam: ldo4 {
					regulator-name = "+3.3V_RUN_CAM";
					regulator-min-microvolt = <2800000>;
					regulator-max-microvolt = <2800000>;
				};

				ldo5 {
					regulator-name = "+1.2V_RUN_CAM_FRONT";
					regulator-min-microvolt = <1200000>;
					regulator-max-microvolt = <1200000>;
				};

				vddio_sdmmc3: ldo6 {
					regulator-name = "+3.3V_VDDIO_SDMMC3";
					regulator-min-microvolt = <1800000>;
					regulator-max-microvolt = <3300000>;
				};

				ldo7 {
					regulator-name = "+1.05V_RUN_CAM_REAR";
					regulator-min-microvolt = <1050000>;
					regulator-max-microvolt = <1050000>;
				};

				ldo9 {
					regulator-name = "+2.8V_RUN_TOUCH";
					regulator-min-microvolt = <2800000>;
					regulator-max-microvolt = <2800000>;
				};

				ldo10 {
					regulator-name = "+2.8V_RUN_CAM_AF";
					regulator-min-microvolt = <2800000>;
					regulator-max-microvolt = <2800000>;
				};

				ldo11 {
					regulator-name = "+1.8V_RUN_VPP_FUSE";
					regulator-min-microvolt = <1800000>;
					regulator-max-microvolt = <1800000>;
				};
			};
		};
	};

	spi@7000d400 {
		status = "okay";

		cros_ec: cros-ec@0 {
			compatible = "google,cros-ec-spi";
			spi-max-frequency = <3000000>;
			interrupt-parent = <&gpio>;
			interrupts = <TEGRA_GPIO(C, 7) IRQ_TYPE_LEVEL_LOW>;
			reg = <0>;

			google,cros-ec-spi-msg-delay = <2000>;

			i2c-tunnel {
				compatible = "google,cros-ec-i2c-tunnel";
				#address-cells = <1>;
				#size-cells = <0>;

				google,remote-bus = <0>;

				charger: bq24735@9 {
					compatible = "ti,bq24735";
					reg = <0x9>;
					interrupt-parent = <&gpio>;
					interrupts = <TEGRA_GPIO(J, 0)
							IRQ_TYPE_EDGE_BOTH>;
					ti,ac-detect-gpios = <&gpio
							TEGRA_GPIO(J, 0)
							GPIO_ACTIVE_HIGH>;
					ti,external-control;
				};

				battery: sbs-battery@b {
					compatible = "sbs,sbs-battery";
					reg = <0xb>;
					sbs,i2c-retry-count = <2>;
					sbs,poll-retry-count = <10>;
					power-supplies = <&charger>;
				};
			};
		};
	};

	spi@7000da00 {
		status = "okay";
		spi-max-frequency = <25000000>;

		flash@0 {
			compatible = "winbond,w25q32dw";
			spi-max-frequency = <25000000>;
			reg = <0>;
		};
	};

	pmc@7000e400 {
		nvidia,invert-interrupt;
		nvidia,suspend-mode = <0>;
		nvidia,cpu-pwr-good-time = <500>;
		nvidia,cpu-pwr-off-time = <300>;
		nvidia,core-pwr-good-time = <641 3845>;
		nvidia,core-pwr-off-time = <61036>;
		nvidia,core-power-req-active-high;
		nvidia,sys-clock-req-active-high;
	};

	hda@70030000 {
		status = "okay";
	};

	usb@70090000 {
		phys = <&{/padctl@7009f000/pads/usb2/lanes/usb2-0}>, /* 1st USB A */
		       <&{/padctl@7009f000/pads/usb2/lanes/usb2-1}>, /* Internal USB */
		       <&{/padctl@7009f000/pads/usb2/lanes/usb2-2}>, /* 2nd USB A */
		       <&{/padctl@7009f000/pads/pcie/lanes/pcie-0}>, /* 1st USB A */
		       <&{/padctl@7009f000/pads/pcie/lanes/pcie-1}>; /* 2nd USB A */
		phy-names = "usb2-0", "usb2-1", "usb2-2", "usb3-0", "usb3-1";

		avddio-pex-supply = <&vdd_1v05_run>;
		dvddio-pex-supply = <&vdd_1v05_run>;
		avdd-usb-supply = <&vdd_3v3_lp0>;
		avdd-pll-utmip-supply = <&vddio_1v8>;
		avdd-pll-erefe-supply = <&avdd_1v05_run>;
		avdd-usb-ss-pll-supply = <&vdd_1v05_run>;
		hvdd-usb-ss-supply = <&vdd_3v3_lp0>;
		hvdd-usb-ss-pll-e-supply = <&vdd_3v3_lp0>;

		status = "okay";
	};

	padctl@7009f000 {
		status = "okay";

		pads {
			usb2 {
				status = "okay";

				lanes {
					usb2-0 {
						nvidia,function = "xusb";
						status = "okay";
					};

					usb2-1 {
						nvidia,function = "xusb";
						status = "okay";
					};

					usb2-2 {
						nvidia,function = "xusb";
						status = "okay";
					};
				};
			};

			pcie {
				status = "okay";

				lanes {
					pcie-0 {
						nvidia,function = "usb3-ss";
						status = "okay";
					};

					pcie-1 {
						nvidia,function = "usb3-ss";
						status = "okay";
					};
				};
			};
		};

		ports {
			usb2-0 {
				vbus-supply = <&vdd_usb1_vbus>;
				status = "okay";
				mode = "otg";
			};

			usb2-1 {
				vbus-supply = <&vdd_run_cam>;
				status = "okay";
				mode = "host";
			};

			usb2-2 {
				vbus-supply = <&vdd_usb3_vbus>;
				status = "okay";
				mode = "host";
			};

			usb3-0 {
				nvidia,usb2-companion = <0>;
				status = "okay";
			};

			usb3-1 {
				nvidia,usb2-companion = <1>;
				status = "okay";
			};
		};
	};

	sdhci0_pwrseq: sdhci0_pwrseq {
		compatible = "mmc-pwrseq-simple";

		reset-gpios = <&gpio TEGRA_GPIO(X, 7) GPIO_ACTIVE_LOW>;
	};
	
	sdhci1_pwrseq: sdhci1_pwrseq {
		compatible = "mmc-pwrseq-simple";
	};

	sdhci@700b0000 { /* WiFi/BT on this bus */
		status = "okay";
		bus-width = <4>;
		no-1-8-v;
		non-removable;
		mmc-pwrseq = <&sdhci0_pwrseq>;
		vmmc-supply = <&vdd_3v3_lp0>;
		vqmmc-supply = <&vddio_1v8>;
		keep-power-in-suspend;
	};

	sdhci@700b0400 { /* SD Card on this bus */
		status = "okay";
		cd-gpios = <&gpio TEGRA_GPIO(V, 2) GPIO_ACTIVE_LOW>;
		power-gpios = <&gpio TEGRA_GPIO(R, 0) GPIO_ACTIVE_HIGH>;
		bus-width = <4>;
		no-1-8-v;
		vqmmc-supply = <&vddio_sdmmc3>;
		mmc-pwrseq = <&sdhci1_pwrseq>;
	};

	sdhci@700b0600 { /* eMMC on this bus */
		status = "okay";
		bus-width = <8>;
		no-1-8-v;
		non-removable;
	};

	/* CPU DFLL clock */
	clock@70110000 {
		status = "disabled";
		vdd-cpu-supply = <&vdd_cpu>;
		nvidia,i2c-fs-rate = <400000>;
	};

	ahub@70300000 {
		i2s@70301100 {
			status = "okay";
		};
	};

	backlight: backlight {
		compatible = "pwm-backlight";

		enable-gpios = <&gpio TEGRA_GPIO(H, 2) GPIO_ACTIVE_HIGH>;
		power-supply = <&vdd_lcd_bl_en>;
		pwms = <&pwm 1 1000000>;
		status = "okay";
          	name = "backlight";
          	post-pwm-on-delay-ms = <20>;
		brightness-levels = <0x00000000
				0x00000001
				0x00000002
				0x00000003
				0x00000004
				0x00000005
				0x00000006
				0x00000007
				0x00000008
				0x00000009
				0x0000000a
				0x0000000b
				0x0000000c
				0x0000000d
				0x0000000e
				0x0000000f
				0x00000010
				0x00000011
				0x00000012
				0x00000013
				0x00000014
				0x00000015
				0x00000016
				0x00000017
				0x00000018
				0x00000019
				0x0000001a
				0x0000001b
				0x0000001c
				0x0000001d
				0x0000001e
				0x0000001f
				0x00000020
				0x00000021
				0x00000022
				0x00000023
				0x00000024
				0x00000025
				0x00000026
				0x00000027
				0x00000028
				0x00000029
				0x0000002a
				0x0000002b
				0x0000002c
				0x0000002d
				0x0000002e
				0x0000002f
				0x00000030
				0x00000031
				0x00000032
				0x00000033
				0x00000034
				0x00000035
				0x00000036
				0x00000037
				0x00000038
				0x00000039
				0x0000003a
				0x0000003b
				0x0000003c
				0x0000003d
				0x0000003e
				0x0000003f
				0x00000040
				0x00000041
				0x00000042
				0x00000043
				0x00000044
				0x00000045
				0x00000046
				0x00000047
				0x00000048
				0x00000049
				0x0000004a
				0x0000004b
				0x0000004c
				0x0000004d
				0x0000004e
				0x0000004f
				0x00000050
				0x00000051
				0x00000052
				0x00000053
				0x00000054
				0x00000055
				0x00000056
				0x00000057
				0x00000058
				0x00000059
				0x0000005a
				0x0000005b
				0x0000005c
				0x0000005d
				0x0000005e
				0x0000005f
				0x00000060
				0x00000061
				0x00000062
				0x00000063
				0x00000064
				0x00000065
				0x00000066
				0x00000067
				0x00000068
				0x00000069
				0x0000006a
				0x0000006b
				0x0000006c
				0x0000006d
				0x0000006e
				0x0000006f
				0x00000070
				0x00000071
				0x00000072
				0x00000073
				0x00000074
				0x00000075
				0x00000076
				0x00000077
				0x00000078
				0x00000079
				0x0000007a
				0x0000007b
				0x0000007c
				0x0000007d
				0x0000007e
				0x0000007f
				0x00000080
				0x00000081
				0x00000082
				0x00000083
				0x00000084
				0x00000085
				0x00000086
				0x00000087
				0x00000088
				0x00000089
				0x0000008a
				0x0000008b
				0x0000008c
				0x0000008d
				0x0000008e
				0x0000008f
				0x00000090
				0x00000091
				0x00000092
				0x00000093
				0x00000094
				0x00000095
				0x00000096
				0x00000097
				0x00000098
				0x00000099
				0x0000009a
				0x0000009b
				0x0000009c
				0x0000009d
				0x0000009e
				0x0000009f
				0x000000a0
				0x000000a1
				0x000000a2
				0x000000a3
				0x000000a4
				0x000000a5
				0x000000a6
				0x000000a7
				0x000000a8
				0x000000a9
				0x000000aa
				0x000000ab
				0x000000ac
				0x000000ad
				0x000000ae
				0x000000af
				0x000000b0
				0x000000b1
				0x000000b2
				0x000000b3
				0x000000b4
				0x000000b5
				0x000000b6
				0x000000b7
				0x000000b8
				0x000000b9
				0x000000ba
				0x000000bb
				0x000000bc
				0x000000bd
				0x000000be
				0x000000bf
				0x000000c0
				0x000000c1
				0x000000c2
				0x000000c3
				0x000000c4
				0x000000c5
				0x000000c6
				0x000000c7
				0x000000c8
				0x000000c9
				0x000000ca
				0x000000cb
				0x000000cc
				0x000000cd
				0x000000ce
				0x000000cf
				0x000000d0
				0x000000d1
				0x000000d2
				0x000000d3
				0x000000d4
				0x000000d5
				0x000000d6
				0x000000d7
				0x000000d8
				0x000000d9
				0x000000da
				0x000000db
				0x000000dc
				0x000000dd
				0x000000de
				0x000000df
				0x000000e0
				0x000000e1
				0x000000e2
				0x000000e3
				0x000000e4
				0x000000e5
				0x000000e6
				0x000000e7
				0x000000e8
				0x000000e9
				0x000000ea
				0x000000eb
				0x000000ec
				0x000000ed
				0x000000ee
				0x000000ef
				0x000000f0
				0x000000f1
				0x000000f2
				0x000000f3
				0x000000f4
				0x000000f5
				0x000000f6
				0x000000f7
				0x000000f8
				0x000000f9
				0x000000fa
				0x000000fb
				0x000000fc
				0x000000fd
				0x000000fe
				0x000000ff
				0x00000100>;
          	default-brightness-level = <224>;
          	
		panel@0 {
                         compatible = "pwm-backlight-alt-brightness-levels";
                         name = "panel";
                         identifier = "AUO-132c-0";
                         brightness-levels = <0x00000000
				0x00000001
				0x00000002
				0x00000002
				0x00000004
				0x00000005
				0x00000006
				0x00000006
				0x00000007
				0x00000008
				0x00000009
				0x0000000a
				0x0000000a
				0x0000000b
				0x0000000c
				0x0000000d
				0x0000000e
				0x0000000f
				0x0000000f
				0x00000010
				0x00000011
				0x00000012
				0x00000013
				0x00000014
				0x00000014
				0x00000015
				0x00000016
				0x00000017
				0x00000018
				0x00000019
				0x00000019
				0x0000001a
				0x0000001b
				0x0000001c
				0x0000001d
				0x0000001e
				0x0000001e
				0x0000001f
				0x00000020
				0x00000021
				0x00000022
				0x00000023
				0x00000023
				0x00000024
				0x00000025
				0x00000026
				0x00000027
				0x00000028
				0x00000028
				0x00000029
				0x0000002a
				0x0000002b
				0x0000002c
				0x0000002d
				0x0000002d
				0x0000002e
				0x0000002f
				0x00000030
				0x00000031
				0x00000032
				0x00000032
				0x00000033
				0x00000034
				0x00000035
				0x00000036
				0x00000037
				0x00000037
				0x00000038
				0x00000039
				0x0000003a
				0x0000003b
				0x0000003c
				0x0000003c
				0x0000003d
				0x0000003e
				0x0000003f
				0x00000040
				0x00000041
				0x00000041
				0x00000042
				0x00000043
				0x00000044
				0x00000045
				0x00000046
				0x00000046
				0x00000047
				0x00000048
				0x00000049
				0x0000004a
				0x0000004b
				0x0000004c
				0x0000004d
				0x0000004d
				0x0000004e
				0x0000004f
				0x00000050
				0x00000051
				0x00000052
				0x00000052
				0x00000053
				0x00000054
				0x00000055
				0x00000056
				0x00000057
				0x00000058
				0x00000059
				0x0000005a
				0x0000005b
				0x0000005c
				0x0000005d
				0x0000005f
				0x0000005f
				0x00000060
				0x00000062
				0x00000062
				0x00000064
				0x00000065
				0x00000066
				0x00000067
				0x00000068
				0x00000069
				0x0000006a
				0x0000006b
				0x0000006c
				0x0000006e
				0x0000006f
				0x00000070
				0x00000071
				0x00000072
				0x00000073
				0x00000074
				0x00000075
				0x00000076
				0x00000077
				0x00000079
				0x00000079
				0x0000007b
				0x0000007c
				0x0000007d
				0x0000007e
				0x0000007f
				0x00000080
				0x00000081
				0x00000082
				0x00000084
				0x00000085
				0x00000086
				0x00000087
				0x00000088
				0x00000089
				0x0000008a
				0x0000008b
				0x0000008d
				0x0000008d
				0x0000008f
				0x00000090
				0x00000091
				0x00000092
				0x00000093
				0x00000094
				0x00000095
				0x00000096
				0x00000097
				0x00000098
				0x0000009a
				0x0000009b
				0x0000009c
				0x0000009d
				0x0000009e
				0x0000009f
				0x000000a0
				0x000000a1
				0x000000a2
				0x000000a4
				0x000000a5
				0x000000a6
				0x000000a7
				0x000000a8
				0x000000a9
				0x000000aa
				0x000000ab
				0x000000ac
				0x000000ad
				0x000000af
				0x000000b0
				0x000000b1
				0x000000b2
				0x000000b3
				0x000000b4
				0x000000b6
				0x000000b7
				0x000000b7
				0x000000b8
				0x000000ba
				0x000000bb
				0x000000bc
				0x000000bd
				0x000000be
				0x000000c0
				0x000000c1
				0x000000c1
				0x000000c2
				0x000000c3
				0x000000c5
				0x000000c6
				0x000000c7
				0x000000c8
				0x000000c9
				0x000000ca
				0x000000cc
				0x000000cc
				0x000000ce
				0x000000cf
				0x000000d0
				0x000000d1
				0x000000d2
				0x000000d3
				0x000000d4
				0x000000d5
				0x000000d6
				0x000000d8
				0x000000d9
				0x000000da
				0x000000db
				0x000000dc
				0x000000de
				0x000000df
				0x000000e0
				0x000000e1
				0x000000e2
				0x000000e3
				0x000000e4
				0x000000e6
				0x000000e6
				0x000000e8
				0x000000e9
				0x000000ea
				0x000000eb
				0x000000ec
				0x000000ed
				0x000000ee
				0x000000ef
				0x000000f1
				0x000000f2
				0x000000f3
				0x000000f4
				0x000000f5
				0x000000f6
				0x000000f7
				0x000000f9
				0x000000fa
				0x000000fb
				0x000000fc
				0x000000fd
				0x000000fe
				0x000000ff
				0x00000100>;
		};
          	panel@1 {
			compatible = "pwm-backlight-alt-brightness-levels";
			name = "panel";
			brightness-levels = <0x00000000
				0x00000001
				0x00000002
				0x00000003
				0x00000003
				0x00000004
				0x00000005
				0x00000006
				0x00000006
				0x00000007
				0x00000008
				0x00000009
				0x00000009
				0x0000000a
				0x0000000b
				0x0000000c
				0x0000000c
				0x0000000d
				0x0000000e
				0x0000000e
				0x0000000f
				0x00000010
				0x00000011
				0x00000011
				0x00000012
				0x00000013
				0x00000013
				0x00000014
				0x00000015
				0x00000016
				0x00000017
				0x00000017
				0x00000018
				0x00000019
				0x00000019
				0x0000001a
				0x0000001b
				0x0000001c
				0x0000001c
				0x0000001d
				0x0000001e
				0x0000001f
				0x0000001f
				0x00000020
				0x00000021
				0x00000022
				0x00000022
				0x00000023
				0x00000024
				0x00000025
				0x00000025
				0x00000026
				0x00000027
				0x00000027
				0x00000028
				0x00000029
				0x0000002a
				0x0000002a
				0x0000002b
				0x0000002c
				0x0000002d
				0x0000002e
				0x0000002e
				0x0000002f
				0x00000030
				0x00000030
				0x00000031
				0x00000032
				0x00000033
				0x00000033
				0x00000034
				0x00000035
				0x00000036
				0x00000036
				0x00000037
				0x00000038
				0x00000038
				0x00000039
				0x0000003a
				0x0000003b
				0x0000003b
				0x0000003c
				0x0000003d
				0x0000003d
				0x0000003e
				0x0000003f
				0x00000040
				0x00000040
				0x00000041
				0x00000042
				0x00000043
				0x00000044
				0x00000044
				0x00000045
				0x00000046
				0x00000047
				0x00000047
				0x00000048
				0x00000049
				0x0000004a
				0x0000004a
				0x0000004b
				0x0000004c
				0x0000004d
				0x0000004e
				0x0000004f
				0x00000050
				0x00000051
				0x00000052
				0x00000053
				0x00000054
				0x00000055
				0x00000056
				0x00000057
				0x00000059
				0x0000005a
				0x0000005a
				0x0000005c
				0x0000005d
				0x0000005e
				0x0000005f
				0x00000060
				0x00000062
				0x00000062
				0x00000064
				0x00000065
				0x00000065
				0x00000067
				0x00000068
				0x00000069
				0x0000006a
				0x0000006b
				0x0000006c
				0x0000006d
				0x0000006e
				0x0000006f
				0x00000071
				0x00000072
				0x00000073
				0x00000074
				0x00000075
				0x00000076
				0x00000077
				0x00000079
				0x0000007a
				0x0000007b
				0x0000007c
				0x0000007d
				0x0000007e
				0x0000007f
				0x00000080
				0x00000081
				0x00000082
				0x00000083
				0x00000085
				0x00000086
				0x00000087
				0x00000088
				0x00000089
				0x0000008a
				0x0000008c
				0x0000008d
				0x0000008e
				0x0000008f
				0x00000090
				0x00000092
				0x00000093
				0x00000094
				0x00000095
				0x00000096
				0x00000097
				0x00000098
				0x0000009a
				0x0000009b
				0x0000009c
				0x0000009d
				0x0000009e
				0x0000009f
				0x000000a1
				0x000000a2
				0x000000a3
				0x000000a4
				0x000000a5
				0x000000a7
				0x000000a8
				0x000000a9
				0x000000aa
				0x000000ab
				0x000000ac
				0x000000ad
				0x000000af
				0x000000b0
				0x000000b1
				0x000000b2
				0x000000b4
				0x000000b5
				0x000000b6
				0x000000b7
				0x000000b9
				0x000000b9
				0x000000bb
				0x000000bc
				0x000000bd
				0x000000be
				0x000000bf
				0x000000c0
				0x000000c2
				0x000000c3
				0x000000c5
				0x000000c5
				0x000000c7
				0x000000c8
				0x000000c9
				0x000000ca
				0x000000cc
				0x000000cd
				0x000000ce
				0x000000cf
				0x000000d0
				0x000000d2
				0x000000d3
				0x000000d5
				0x000000d5
				0x000000d7
				0x000000d8
				0x000000d9
				0x000000da
				0x000000dc
				0x000000dd
				0x000000de
				0x000000df
				0x000000e1
				0x000000e2
				0x000000e3
				0x000000e4
				0x000000e5
				0x000000e6
				0x000000e7
				0x000000e9
				0x000000ea
				0x000000eb
				0x000000ed
				0x000000ee
				0x000000ef
				0x000000f0
				0x000000f2
				0x000000f3
				0x000000f4
				0x000000f5
				0x000000f6
				0x000000f8
				0x000000f9
				0x000000fa
				0x000000fb
				0x000000fd
				0x000000fe
				0x00000100>;
			identifier = "AUO-112d-0";
		};
	};

	clocks {
		compatible = "simple-bus";
		#address-cells = <1>;
		#size-cells = <0>;

		clk32k_in: clock@0 {
			compatible = "fixed-clock";
			reg = <0>;
			#clock-cells = <0>;
			clock-frequency = <32768>;
		};
	};

	cpus {
		cpu@0 {
			vdd-cpu-supply = <&vdd_cpu>;
		};
	};

	gpio-keys {
		compatible = "gpio-keys";

		lid {
			label = "Lid";
			gpios = <&gpio TEGRA_GPIO(R, 4) GPIO_ACTIVE_LOW>;
			linux,input-type = <5>;
			linux,code = <KEY_RESERVED>;
			debounce-interval = <1>;
			wakeup-source;
			status = "okay";
		};

		power {
			label = "Power";
			gpios = <&gpio TEGRA_GPIO(Q, 0) GPIO_ACTIVE_LOW>;
			linux,code = <KEY_POWER>;
			debounce-interval = <30>;
			wakeup-source;
			status = "okay";
		};
	};

	regulators {
		compatible = "simple-bus";
		#address-cells = <1>;
		#size-cells = <0>;

		vdd_mux: regulator@0 {
			compatible = "regulator-fixed";
			reg = <0>;
			regulator-name = "+VDD_MUX";
			regulator-min-microvolt = <12000000>;
			regulator-max-microvolt = <12000000>;
			regulator-always-on;
			regulator-boot-on;
		};

		vdd_5v0_sys: regulator@1 {
			compatible = "regulator-fixed";
			reg = <1>;
			regulator-name = "+5V_SYS";
			regulator-min-microvolt = <5000000>;
			regulator-max-microvolt = <5000000>;
			regulator-always-on;
			regulator-boot-on;
			vin-supply = <&vdd_mux>;
		};

		vdd_usb1_vbus: regulator@2 {
			compatible = "regulator-fixed";
			reg = <2>;
			regulator-name = "+5V_USB_HS";
			regulator-min-microvolt = <5000000>;
			regulator-max-microvolt = <5000000>;
			gpio = <&gpio TEGRA_GPIO(N, 4) GPIO_ACTIVE_HIGH>;
			enable-active-high;
			gpio-open-drain;
			vin-supply = <&vdd_5v0_sys>;
		};

		vdd_3v3_run: regulator@3 {
			compatible = "regulator-fixed";
			reg = <3>;
			regulator-name = "+3.3V_RUN";
			regulator-min-microvolt = <3300000>;
			regulator-max-microvolt = <3300000>;
			regulator-always-on;
			regulator-boot-on;
			gpio = <&pmic 1 GPIO_ACTIVE_HIGH>;
			enable-active-high;
			vin-supply = <&vdd_mux>;
		};

		vdd_5v0_hdmi: regulator@4 {
			compatible = "regulator-fixed";
			reg = <4>;
			regulator-name = "+3.3V_AVDD_HDMI_AP_GATED";
			regulator-min-microvolt = <5000000>;
			regulator-max-microvolt = <5000000>;
			gpio = <&gpio TEGRA_GPIO(K, 6) GPIO_ACTIVE_HIGH>;
			vin-supply = <&vdd_5v0_sys>;
			enable-active-high;
			regulator-boot-on;
		};

		vdd_5v0_avd_lcd: regulator@5 {
			compatible = "regulator-fixed";
			reg = <5>;
			regulator-name = "+5.0V_AVD_LCD";
			enable-active-high;
			regulator-boot-on;
			gpio = <&pmic 4 GPIO_ACTIVE_HIGH>;
			regulator-min-microvolt = <5000000>;
			regulator-max-microvolt = <5000000>;
			vin-supply = <&vdd_5v0_sys>;
		};

		vdd_5v0_backlight: regulator@6 {
			compatible = "regulator-fixed";
			reg = <6>;
			regulator-name = "+5V_VDD_BACKLIGHT";
			regulator-min-microvolt = <5000000>;
			regulator-max-microvolt = <5000000>;
			enable-active-high;
			regulator-boot-on;
			gpio = <&gpio TEGRA_GPIO(P, 2) GPIO_ACTIVE_HIGH>;
			vin-supply = <&vdd_5v0_sys>;
		};

		vdd_lcd_bl_en: regulator@7 {
			compatible = "regulator-fixed";
			reg = <7>;
			regulator-name = "+5V_USB_HS";
			regulator-min-microvolt = <5000000>;
			regulator-max-microvolt = <5000000>;
			//handled in backlight
			//gpio = <&gpio TEGRA_GPIO(H, 2) GPIO_ACTIVE_HIGH>;
			enable-active-high;
			regulator-boot-on;
			vin-supply = <&vdd_5v0_sys>;
		};

		vdd_usb3_vbus: regulator@8 {
			compatible = "regulator-fixed";
			reg = <8>;
			regulator-name = "+5V_USB_SS";
			regulator-min-microvolt = <5000000>;
			regulator-max-microvolt = <5000000>;
			gpio = <&gpio TEGRA_GPIO(N, 5) GPIO_ACTIVE_HIGH>;
			enable-active-high;
			gpio-open-drain;
			vin-supply = <&vdd_5v0_sys>;
		};

		vdd_5v0_panel: regulator@9 {
			compatible = "regulator-fixed";
			reg = <9>;
			regulator-name = "+5V0_PANEL";
			regulator-min-microvolt = <5000000>;
			regulator-max-microvolt = <5000000>;
			gpio = <&pmic 1 GPIO_ACTIVE_HIGH>;
			enable-active-high;
			regulator-boot-on;
			vin-supply = <&vdd_5v0_sys>;
		};

		vdd_3v3_lp0: regulator@10 {
			compatible = "regulator-fixed";
			reg = <10>;
			regulator-name = "+3.3V_LP0";
			regulator-min-microvolt = <3300000>;
			regulator-max-microvolt = <3300000>;
			/*
			 * TODO: find a way to wire this up with the USB EHCI
			 * controllers so that it can be enabled on demand.
			 */
			regulator-always-on;
			enable-active-high;
			vin-supply = <&vdd_3v3_run>;
		};

		vdd_hdmi_pll: regulator@11 {
			compatible = "regulator-fixed";
			reg = <11>;
			regulator-name = "+1.05V_RUN_AVDD_HDMI_PLL";
			regulator-min-microvolt = <1050000>;
			regulator-max-microvolt = <1050000>;
			gpio = <&gpio TEGRA_GPIO(H, 7) GPIO_ACTIVE_LOW>;
			vin-supply = <&vdd_1v05_run>;
			regulator-boot-on;
		};

		vdd_3v3_dpaux: regulator@12 {
			compatible = "regulator-fixed";
			reg = <12>;
			regulator-name = "+3V3_DPAUX_CON";
			regulator-min-microvolt = <3300000>;
			regulator-max-microvolt = <3300000>;
			vin-supply = <&vdd_3v3_run>;
			regulator-boot-on;
			regulator-enable-always-on;
		};
		
		vdd_3v3_sensor: regulator@13 {
			compatible = "regulator-fixed";
			reg = <13>;
			regulator-name = "+3V3_SENSOR";
			regulator-min-microvolt = <3300000>;
			regulator-max-microvolt = <3300000>;
			gpio = <&pmic 1 GPIO_ACTIVE_HIGH>;
			enable-active-high;
			vin-supply = <&vdd_3v3_run>;
		};
	};

	sound {
		nvidia,audio-routing =
			"Headphones", "HPR",
			"Headphones", "HPL",
			"Speakers", "SPKR",
			"Speakers", "SPKL",
			"Mic Jack", "MICBIAS",
			"DMICL", "Int Mic",
			"DMICR", "Int Mic",
			"IN34", "Mic Jack";

		nvidia,i2s-controller = <&tegra_i2s1>;
		nvidia,audio-codec = <&acodec>;

		clocks = <&tegra_car TEGRA124_CLK_PLL_A>,
			 <&tegra_car TEGRA124_CLK_PLL_A_OUT0>,
			 <&tegra_car TEGRA124_CLK_EXTERN1>;
		clock-names = "pll_a", "pll_a_out0", "mclk";

		nvidia,hp-det-gpios = <&gpio TEGRA_GPIO(I, 7) GPIO_ACTIVE_HIGH>;
		nvidia,mic-det-gpios =
				<&gpio TEGRA_GPIO(R, 7) GPIO_ACTIVE_HIGH>;
	};

	gpio-restart {
		compatible = "gpio-restart";
		gpios = <&gpio TEGRA_GPIO(I, 5) GPIO_ACTIVE_LOW>;
		priority = <200>;
	};
};

#include "cros-ec-keyboard.dtsi"
